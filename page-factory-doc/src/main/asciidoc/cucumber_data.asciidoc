==== Работа с тестовыми данными

Тестовые данные могут быть использованы в любом шаге сценария. Тестовые данные могут храниться в одном из форматов:

* json
* properties
* excel
* mongo

===== Тип и расположение файлов тестовых данных

Задать тип тестовых данных можно в файле конфигурации `application.properties`
[source,]
----
data.type = json
----
Задать расположение тестовых данных можно следующим образом:

[source,]
----
data.folder = src/test/resources/data/
----

Если файлы имеют нестандартное для типа данных расширение, укажите его в настройках. Например, для файлов с раширением `jsonp`:

[source,]
----
data.extension = jsonp
----

===== Инициализация коллекции

{counter:b}. Если в проекте один файл тестовых данных или преимущественно используется один файл, то имеет смысл задать часто используемую коллекцию данных через конфигурацию. Имя файла задается без расширения. Например, для `Data.json`:

[source,]
----
data.initial.collection = Data
----

{counter:b}. Инициализировать коллекцию можно непосредственно для тестового сценария или фичи. Для этого существует специальный тэг `@data`

NOTE: Для обозначениния коллекции используется символ `$`

[source,]
----
@data=$Data
----

{counter:b}. Коллекция может быть не инициализорована, тогда в шагах тестового сценария нужно будет прописывать каждый раз полный путь, начиная с коллекции

[source,]
----
И пользователь (тестирует) "Элемент" с параметром "$Data{Admin.first name}"
----


===== Путь к элементу коллекции
Для обозначения пути внутри коллекции используются фигурные скобки

WARNING: Обратите внимание, если имя коллекции не указывается явно перед параметром, то перед фигурными скобками должен стоять символ `$` (брать данные из текущей коллекции)

Пример для элемента `first name` из набора `Admin` коллекции `Data`

[source,]
----
И пользователь (тестирует) "Элемент" с параметром "$Data{Admin.first name}"
----

===== Примеры
*__Простой пример с заданием коллекции через тэг `@data`__*

image::images/dataSimpleEx.png[]

*__Через `@data` можно задать не только имя коллекции, но и путь к набору данных внутри нее__*

Пример:

image::images/dataEx2.png[]

*__Пример инициализации коллекции для сценария с использованием параметров в таблице данных__*

image::images/dataTableEx.png[]

*__Пример использования нескольких файлов данных в одном тестовом сценарии, массивов данных__*

image::images/dataTwoCollections.png[]


*__Пример задания пути данных с учетом коллекции, описанной в конфигурации__*

Пример для значения

[source,]
----
data.initial.collection = Data
----

image::images/dataInit.png[]