==== Работа с тестовыми данными

Тестовые данные могут быть использованы в любом шаге сценария. Тестовые данные могут храниться в одном из форматов:

* json
* properties
* excel
* mongo

===== Тип и расположение файлов тестовых данных

Задать тип тестовых данных можно в файле конфигурации `application.properties`
[source,]
----
data.type = json
----
Задать расположение тестовых данных можно следующим образом:

[source,]
----
data.folder = src/test/resources/data/
----

Для `excel` путь указывается до файла без расширения:

[source,]
----
data.folder = src/test/resources/data/Data
----

Если файлы имеют нестандартное для типа данных расширение, нужно указать его в настройках. Для `excel` не будет учитываться (всегда будет `xslx`). Например, для файлов с раширением `jsonp`:

[source,]
----
data.extension = jsonp
----

===== Инициализация коллекции

Для инициализации коллекции нужно задать ее через конфигурацию. Имя файла задается без расширения. Если в проекте используется несколько коллекций, то в параметре нужно указать наиболее часто используемую. Пример инициализации коллекции для `Data.json`:

[source,]
----
data.initial.collection = Data
----

Обратиться к инициализированной можно через символ `$`, к неинициализированной через `$` и имя.
Для обращения из фичи существует тэг `@data`. Пример:

[source,]
----
@data=$OtherData
----

Для `excel` коллекция - это имя вкладки

===== Особенности работы `mongodb`
Для `mongodb` есть два дополнительных обязательных параметра: адрес и имя базы данных. Например:
[source,]
----
data.uri = mongodb://username:password@host.ru:8080
data.db = bd
----

===== Путь к элементу коллекции
Для обозначения пути внутри коллекции используются фигурные скобки

WARNING: Обратите внимание, если имя коллекции не указывается явно перед параметром, то перед фигурными скобками должен стоять символ `$` (брать данные из текущей коллекции)

Пример для элемента `first name` из набора `Admin` коллекции `Data`

[source,]
----
И пользователь (тестирует) "Элемент" с параметром "$Data{Admin.first name}"
----

===== Примеры
*__Простой пример с заданием коллекции через тэг `@data`__*

image::images/dataSimpleEx.png[]

*__Через `@data` можно задать не только имя коллекции, но и путь к набору данных внутри нее__*

Пример:

image::images/dataEx2.png[]

*__Пример инициализации коллекции для сценария с использованием параметров в таблице данных__*

image::images/dataTableEx.png[]

*__Пример использования нескольких файлов данных в одном тестовом сценарии, массивов данных__*

image::images/dataTwoCollections.png[]


*__Пример задания пути данных с учетом коллекции, описанной в конфигурации__*

Пример для значения

[source,]
----
data.initial.collection = Data
----

image::images/dataInit.png[]