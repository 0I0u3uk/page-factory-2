language: java
branches:
  only:
  - master
  - "/^[0-9]+\\.[0-9]+\\.[0-9]+$/"
addons:
  sonarqube:
    token:
      secure: Mgl9oGRrQILyaYoBMBWJV+yaLGaAu8UQvLoEqGlL5iCu7wrlPL40GSV9t3G5akmPrCjWRuwu2MkqU5Y+iajShZV/RCsbZhlh/s9G1TNPVA+iaQP2MLduoeY0LnvNGVVEJkCAXvmk6Eu5J8FJ9TimGsuEKzBaXwq1lBJNXuUsuwZWWD7dMOeHCw6fZ4U6dD7MCfd5F1noAwB2Amcpzcq4yAbl3kTwaV8OdpJR50zi7dbcwW/1ZvB+gXqO2H9ydfxd2DELoyNrv08seefneBgyN3RJTtxePhHQ8p5pZMpDzEJ7wKClwdGH8l2yuSbsZtiDWV7tSGw++U4npr2RWZ3PUSn+Vn3s5N0JefwPjY4lglkZDKUFx+w3BoLk5S1N42dWUXMvKB0bdtpfcajWgGA1JUBnnmWebBfxWm8LcyGLkcJf6pL0Mqz+e9eVsldj0sBpWTFMfQ3hQipIHx1wTX2ePfCDgVIhBqaMX6pPoJhNnoqGe2c5WWVfKw1J/gX4vR03eobWC0PRaLS35SDEssOJ8M37NQ7c1V5RUdxVL4DDQ1q9cBuKiSEQ5EHGooySYoPiKnam0ucBrh4kDqT9tNBw8yPDK90+A9V7HT3IFWug0ew61NiQlT6GXErpcV2MFnvjG6f56I0DSdW/lOh9YVZsyiXeaul3GQf5UhfceeXBE0E=
    github_token:
      secure: PSkgsAnkSG50UAnKQjxrZGev9vGqVjzz2XSwWBDMFwwskBOxG3UHtDNsG6T1DjTA6lBvoTI2Y4oEk61lO9gtfoevtyam1Pvc4QYZyhV0HPAnk3E0aDSifnlqIp3k3cocA8HSVAKCxibk6eC450SL/OO7xBZyq9N0aAZwWXq0Mm1PxsvEDcz68YcOZdPoA0a4Gx5HQE8Rn5JmhNiQKXVFm84+hGKT8tzNQjUQIbLnBq0OdK2lg1d+nN+QZ3P1ufaosjnPZ07/BVnmFqvUl7a/BaZCxjM80sZ7qRJpKGowDP9XO9xJcgHIi+ChBV9czuE+8xuJMCffQvlkEdcXKAW3jEohompv3HYfQBgvD0Wj5x4t4s7HP1SpwTFc1LNgEEOJvuwjQS6LiHKdwIR/kAXagT37ZhUrM0Z4NGhjNBpmYDBZQVVIUz3Qpg7Kl+qPZQtXjpr12KDYvUhEEpV1n7plZ/4OcsrMKjRoLMxP0USN3E0GJitNdy1Sdx+wTvO/nlnOIdEzmTUSxRKXWjDXaNBfs9WBvnJMSaxM+7IA2VU5ZIL2qlpO164gp0FNHSS7vxInmA2p65CnMN5yxvDApjmahJu/rQhMMD+hfxEF+F9rULAP7o1SCn1zaX4m0/HJ177BGiGT/6UmEEBHSf/gPXfRQMlLLmQvKTJB3lMlTyiosdg=
jdk:
- oraclejdk8
before_install:
- if [ ! -z "$GPG_SECRET_KEYS" ]; then echo $GPG_SECRET_KEYS | base64 --decode | $GPG_EXECUTABLE
  --import; fi
- if [ ! -z "$GPG_OWNERTRUST" ]; then echo $GPG_OWNERTRUST | base64 --decode | $GPG_EXECUTABLE
  --import-ownertrust; fi
- cd java/  
install:
- mvn clean --settings $TRAVIS_BUILD_DIR/.travis/settings.xml install -DskipTests=true -Dmaven.javadoc.skip=true
  -Dgpg.skip -B -V
script:
- sonar-scanner
deploy:
- provider: script
  script: "$TRAVIS_BUILD_DIR/.travis/deploy.sh"
  skip_cleanup: true
  on:
    repo: sbtqa/page-factory-2
    branch: master
    jdk: oraclejdk8
- provider: script
  script: "$TRAVIS_BUILD_DIR.travis/deploy.sh"
  skip_cleanup: true
  on:
    repo: sbtqa/page-factory-2
    tags: true
    jdk: oraclejdk8
